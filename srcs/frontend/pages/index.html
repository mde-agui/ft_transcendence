<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Pong Game</title>
	<!-- Tailwind CSS CDN -->
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
		/* Reset body and html to prevent extra white space */
		html,
		body {
			margin: 0;
			padding: 0;
			height: 100%;
			background-color: black;
			min-width: 400px;
			min-height: 240px;
		}

		#backgroundCanvas {
			top: 0;
			left: 0;
			position: absolute;
			width: 100%;
			height: 100%;
			object-fit: contain;
			overflow: hidden;
			z-index: 1;
			background: radial-gradient(#100826, #060212);
		}

		#starsCanvas {
			top: 0;
			left: 0;
			position: absolute;
			width: 100%;
			height: 100%;
			object-fit: contain;
			overflow: hidden;
			z-index: 2;
			background-color: transparent;
		}

		#milkyWayCanvas {
			top: 0;
			left: 0;
			position: absolute;
			width: 100%;
			height: 100%;
			background-color: transparent;
			object-fit: contain;
			overflow: hidden;
			z-index: 1;
			filter: blur(0px);
		}

		.no-select {
			user-select: none;
		}

		#app {
			transition: opacity 0.5s ease-in-out, background-image 0.5s ease-in-out;
			opacity: 1;
			background-image: url("https://images.gog-statics.com/2711f1155f42d68a57c9ad2fb755a49839e6bc17a22b4a0bc262b0e35cb73115.jpg");
			min-height: 100%;
			background-size: cover;
			background-position: center;
			color: black;
		}

		/* Fade-out effect */
		#app.fade-out {
			opacity: 0.5;
		}

		/* Optional: Add a little extra smoothness by applying background image fade-in delay */
		#app.fade-in {
			transition: opacity 1s ease-in-out 0.5s, background-image 0.5s ease-in-out;
		}

		/* Style for top bar buttons */
		#top-bar .nav-btn {
			font-size: 2rem;
			color: black;
			font-weight: bold;
			transition: none;
			cursor: pointer;
			background: transparent;
			border: none;
			padding: 0;
		}

		#top-bar .nav-btn:hover {
			font-size: 2rem;
		}

		#top-bar .nav-btn.active {
			font-size: 2rem;
		}

		/* Play dropdown max height and scroll */
		#play-options {
			max-height: 200px;
			overflow-y: auto;
		}

		/* Gris-inspired main menu styles */
		#gris-main-menu {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: transparent;
			z-index: 20;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			opacity: 0;
			visibility: hidden;
			transition: opacity 0.8s ease-in-out, visibility 0.8s ease-in-out;
		}

		#gris-main-menu.active {
			opacity: 1;
			visibility: visible;
		}

		/* Celestial canvas for background effects */
		#celestial-canvas {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			pointer-events: none;
			z-index: 1;
		}

		/* Main menu content */
		.gris-menu-content {
			position: relative;
			z-index: 5;
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 2rem;
		}

		.gris-title {
			font-size: 4rem;
			font-weight: 300;
			color: #e8d5ff;
			text-shadow: 0 0 20px rgba(232, 213, 255, 0.3);
			letter-spacing: 0.5em;
			margin-bottom: 3rem;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}

		.gris-menu-buttons {
			display: flex;
			flex-direction: column;
			gap: 1.5rem;
			align-items: center;
		}

		.gris-btn {
			background: rgba(232, 213, 255, 0.1);
			border: 2px solid rgba(232, 213, 255, 0.3);
			color: #e8d5ff;
			padding: 1rem 2.5rem;
			font-size: 1.2rem;
			font-weight: 300;
			border-radius: 2rem;
			cursor: pointer;
			transition: all 0.3s ease;
			backdrop-filter: blur(10px);
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
			text-transform: uppercase;
			letter-spacing: 0.1em;
			min-width: 200px;
			text-align: center;
		}

		.gris-btn:hover {
			background: rgba(232, 213, 255, 0.2);
			border-color: rgba(232, 213, 255, 0.5);
			box-shadow: 0 8px 25px rgba(232, 213, 255, 0.2);
			transform: translateY(-2px);
		}

		.gris-btn:active {
			transform: translateY(0);
		}

		/* Orbital elements */
		.orbital-container {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			z-index: 2;
		}

		.orbit-ring {
			position: absolute;
			border: 1px solid rgba(232, 213, 255, 0.2);
			border-radius: 50%;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}

		.orbit-ring-1 {
			width: 300px;
			height: 300px;
			animation: rotate-slow 20s linear infinite;
		}

		.orbit-ring-2 {
			width: 450px;
			height: 450px;
			animation: rotate-slow 30s linear infinite reverse;
		}

		.orbit-ring-3 {
			width: 600px;
			height: 600px;
			animation: rotate-slow 40s linear infinite;
		}

		.orbit-dot {
			position: absolute;
			width: 4px;
			height: 4px;
			background: #e8d5ff;
			border-radius: 50%;
			box-shadow: 0 0 8px rgba(232, 213, 255, 0.8);
		}

		.orbit-dot-1 {
			top: -2px;
			left: 50%;
			transform: translateX(-50%);
		}

		.orbit-dot-2 {
			top: 50%;
			right: -2px;
			transform: translateY(-50%);
		}

		.orbit-dot-3 {
			bottom: -2px;
			left: 50%;
			transform: translateX(-50%);
		}

		@keyframes rotate-slow {
			from {
				transform: translate(-50%, -50%) rotate(0deg);
			}

			to {
				transform: translate(-50%, -50%) rotate(360deg);
			}
		}

		/* Language selector in gris menu */
		.gris-language-selector {
			position: absolute;
			bottom: 2rem;
			right: 2rem;
			z-index: 6;
		}

		.gris-language-btn {
			background: rgba(232, 213, 255, 0.1);
			border: 1px solid rgba(232, 213, 255, 0.2);
			color: #e8d5ff;
			padding: 0.5rem 1rem;
			border-radius: 1rem;
			cursor: pointer;
			font-size: 0.9rem;
			backdrop-filter: blur(5px);
		}

		.gris-language-options {
			position: absolute;
			bottom: 100%;
			right: 0;
			margin-bottom: 0.5rem;
			background: rgba(45, 27, 78, 0.9);
			border: 1px solid rgba(232, 213, 255, 0.2);
			border-radius: 0.5rem;
			padding: 0.5rem;
			backdrop-filter: blur(10px);
			min-width: 120px;
		}

		.gris-language-option {
			display: block;
			width: 100%;
			padding: 0.5rem;
			background: none;
			border: none;
			color: #e8d5ff;
			cursor: pointer;
			text-align: left;
			border-radius: 0.25rem;
			transition: background 0.2s ease;
		}

		.gris-language-option:hover {
			background: rgba(232, 213, 255, 0.1);
		}

		/* Responsive design */
		@media (max-width: 768px) {
			.gris-title {
				font-size: 2.5rem;
				letter-spacing: 0.3em;
			}

			.orbit-ring-1 {
				width: 200px;
				height: 200px;
			}

			.orbit-ring-2 {
				width: 300px;
				height: 300px;
			}

			.orbit-ring-3 {
				width: 400px;
				height: 400px;
			}

			.gris-btn {
				padding: 0.8rem 2rem;
				font-size: 1rem;
				min-width: 180px;
			}
		}

		@media (max-width: 480px) {
			.gris-title {
				font-size: 2rem;
				letter-spacing: 0.2em;
			}

			.orbit-ring-1 {
				width: 150px;
				height: 150px;
			}

			.orbit-ring-2 {
				width: 220px;
				height: 220px;
			}

			.orbit-ring-3 {
				width: 300px;
				height: 300px;
			}

			.gris-btn {
				padding: 0.7rem 1.5rem;
				font-size: 0.9rem;
				min-width: 160px;
			}
		}
	</style>
</head>

<body class="m-0 h-screen bg-cover bg-center bg-no-repeat bg-fixed text-white">
	<canvas id="backgroundCanvas" style="z-index:1;"></canvas>
	<canvas id="milkyWayCanvas" style="z-index:2;"></canvas>
	<canvas id="starsCanvas" style="z-index:3;"></canvas>
	<canvas id="orbsCanvas" style="z-index:4;"></canvas>
	<!-- Ambient Music Player -->
	<div id="ambient-audio-container"
		style="position:fixed;bottom:24px;right:32px;z-index:1000;display:flex;align-items:center;gap:0.5rem;background:rgba(44,34,84,0.12);border-radius:2rem;padding:0.5rem 1.2rem;box-shadow:0 2px 8px rgba(44,34,84,0.10);">
		<audio id="ambient-audio" src="assets/ambient.mp3" loop autoplay></audio>
		<button id="mute-btn"
			style="background:none;border:none;outline:none;cursor:pointer;font-size:1.6rem;color:#2c2254;">
			üîä
		</button>
	</div>
	<script>
		const audio = document.getElementById('ambient-audio');
		const muteBtn = document.getElementById('mute-btn');
		let isMuted = false;
		muteBtn.addEventListener('click', () => {
			isMuted = !isMuted;
			audio.muted = isMuted;
			muteBtn.textContent = isMuted ? 'üîá' : 'üîä';
		});
		audio.volume = 0.5;
		audio.play().catch(() => { });
		document.body.addEventListener('click', () => {
			audio.play();
		}, { once: true });
	</script>

	<!-- Gris-inspired Main Menu (shown when not logged in) -->
	<div id="gris-main-menu">
		<!-- Celestial background canvas -->
		<canvas id="celestial-canvas"></canvas>

		<!-- Orbital rings -->
		<div class="orbital-container">
			<div class="orbit-ring orbit-ring-1">
				<div class="orbit-dot orbit-dot-1"></div>
			</div>
			<div class="orbit-ring orbit-ring-2">
				<div class="orbit-dot orbit-dot-2"></div>
			</div>
			<div class="orbit-ring orbit-ring-3">
				<div class="orbit-dot orbit-dot-3"></div>
			</div>
		</div>

		<!-- Main menu content -->
		<div class="gris-menu-content">
			<h1 class="gris-title">GRIS PONG</h1>
			<div class="gris-menu-buttons">
				<button id="gris-login" class="gris-btn">üîë Login</button>
				<button id="gris-register" class="gris-btn">üìù Register</button>
			</div>
		</div>

		<!-- Language selector -->
		<div class="gris-language-selector">
			<button id="gris-language-btn" class="gris-language-btn">üåê Language</button>
			<div id="gris-language-options" class="gris-language-options hidden">
				<button data-lang="en" class="gris-language-option">English</button>
				<button data-lang="es" class="gris-language-option">Espa√±ol</button>
				<button data-lang="pt" class="gris-language-option">Portugu√™s</button>
			</div>
		</div>
	</div>

	<!-- Top bar (shown when logged in) -->
	<div id="top-bar"
		class="fixed top-0 left-0 w-full z-50 bg-transparent overflow-visible whitespace-nowrap flex justify-start items-center gap-4 py-6 px-6 no-select">
		<!-- Play button with dropdown -->
		<div class="relative inline-block">
			<button id="play-btn" class="nav-btn">üéÆ Play</button>
			<div id="play-options"
				class="hidden absolute top-full left-0 mt-2 bg-white text-black rounded shadow-lg p-2 space-y-1 z-[9999] w-36">
				<button id="play-tournament" class="block px-4 py-2 hover:bg-gray-200 w-full text-left">üèÜ
					Tournament</button>
				<button id="play-play" class="block px-4 py-2 hover:bg-gray-200 w-full text-left">üéÆ Play</button>
				<button id="play-matchmaking" class="block px-4 py-2 hover:bg-gray-200 w-full text-left">üîó
					Matchmaking</button>
			</div>
		</div>
		<!-- Keep these visible -->
		<button id="teams-btn" class="nav-btn">üë• Teams</button>
		<button id="friend-requests-btn" class="nav-btn relative">
			üìß Friend Requests
			<span id="friend-requests-badge"
				class="absolute -top-2 -right-2 bg-red-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center hidden">!</span>
		</button>
		<button id="profile-btn" class="nav-btn">üë§ Profile</button>
		<button id="settings-btn" class="nav-btn">‚öôÔ∏è Player Settings</button>
		<button id="logout-btn" class="nav-btn">üö™ Logout</button>
		<!-- Login and Register buttons (visible only when NOT logged in) -->
		<button id="login-btn" class="nav-btn">üîë Login</button>
		<button id="register-btn" class="nav-btn">üìù Register</button>
		<!-- Language Selector -->
		<div class="relative inline-block">
			<button id="language-btn" class="nav-btn">üåê Language</button>
			<div id="language-options"
				class="hidden absolute top-full left-0 mt-2 bg-white text-black rounded shadow-lg p-2 space-y-1 z-[9999] w-32">
				<button data-lang="en" class="block px-4 py-2 hover:bg-gray-200 w-full text-left">English</button>
				<button data-lang="es" class="block px-4 py-2 hover:bg-gray-200 w-full text-left">Espa√±ol</button>
				<button data-lang="pt" class="block px-4 py-2 hover:bg-gray-200 w-full text-left">Portugu√™s</button>
			</div>
		</div>
	</div>

	<!-- Main App Content -->
	<div id="app" class="pt-32 px-4 text-black">
		<!-- Dynamic content will be rendered here -->
	</div>

	<!-- App Logic -->
	<script type="module" src="index.js"></script>

	<!-- Dropdown toggle scripts -->
	<script>
		// Play button dropdown toggle
		document.addEventListener('click', (e) => {
			const playBtn = document.getElementById('play-btn');
			const playOptions = document.getElementById('play-options');
			if (!playBtn || !playOptions) return;
			if (playBtn.contains(e.target)) {
				playOptions.classList.toggle('hidden');
			} else if (!playOptions.contains(e.target)) {
				playOptions.classList.add('hidden');
			}
		});
		// Language button dropdown toggle
		document.addEventListener('click', (e) => {
			const langBtn = document.getElementById('language-btn');
			const langOptions = document.getElementById('language-options');
			if (!langBtn || !langOptions) return;
			if (langBtn.contains(e.target)) {
				langOptions.classList.toggle('hidden');
			} else if (!langOptions.contains(e.target)) {
				langOptions.classList.add('hidden');
			}
		});
	</script>
</body>

</html>
